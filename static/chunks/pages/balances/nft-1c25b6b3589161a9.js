(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{7278:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/balances/nft",function(){return c(1590)}])},1590:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return B},default:function(){return C}});var d=c(1799),e=c(5893),f=c(2601),g=c(9396),h=c(7294),i=c(9653),j=c(6756),k=c(8641),l=c(9184),m=c(1128),n=c(7741),o=c(2494),p=c(2393),q=c(6101),r=c(3234),s=c(979),t=c(7026),u=c(3382),v=c(1919),w=c(3289),x=c(1392),y=c(5125);function z(a){return null===a||""===a|| void 0===a}var A=function(a){var b=a.account,c=a.web3,f=a.chainId,A=(0,i.qY)(),B=A.isOpen,C=A.onOpen,D=A.onClose,E=(0,i.qY)(),F=(0,h.useState)([]),G=F[0],H=F[1],I=(0,h.useState)(null),J=I[0],K=I[1],L=(0,h.useState)(""),M=L[0],N=L[1],O=(0,h.useState)(""),P=O[0],Q=O[1],R=(0,h.useState)(!1),S=R[0],T=R[1],U=(0,h.useState)(0),V=U[0],W=U[1],X=(0,h.useState)([]),Y=X[0],Z=X[1],$=(0,h.useState)([]),_=$[0],aa=$[1],ab=(0,h.useState)([]),ac=ab[0],ad=ab[1],ae=(0,h.useState)("0"),af=ae[0],ag=ae[1],ah=(0,h.useState)(!1),ai=ah[0],aj=ah[1],ak=(0,h.useState)({}),al=ak[0],am=ak[1],an=(0,h.useState)({}),ao=an[0],ap=an[1],aq=(0,h.useState)(""),ar=aq[0],as=aq[1],at=(0,h.useState)(0),au=at[0],av=at[1],aw=(0,h.useState)(9),ax=aw[0],ay=(0,j.pm)();(0,h.useEffect)(function(){null!=c&&K(new c.eth.Contract(x,y.pE[f]))},[c]),(0,h.useEffect)(function(){null!=J&&(az(),N(""),T(!1))},[J]),(0,h.useEffect)(function(){(console.log("update robotAddress"),z(M))?Z([]):(0,J.methods.allTokensInSlot)(M).call({from:b}).then(function(a){console.log(a),Z(a)})},[M]),(0,h.useEffect)(function(){if(console.log("update bMineNFT"),S){var a=[],c=J.methods["balanceOf(address)"];c(b).call({from:b}).then(function(d){c=J.methods.tokenOfOwnerByIndex;for(var e=0;e<d;e++)c(b,e).call({from:b}).then(function(b){a.push(b),a.length===d&&aa(a)})})}else aa([])},[S]),(0,h.useEffect)(function(){console.log("update tokensInSlot & myTokens");var a,c,d,e,f=au*ax,g=(au+1)*ax;if(Y.length>0||_.length>0)a=f,c=g,d=[],(e=(d=0===Y.length&&z(M)?_:0!==_.length||S?Y.filter(function(a){return _.includes(a)}).sort(function(a,b){return b-a}):Y).length)>a&&e<c&&(c=e),ad(d.slice(a,c));else if(!z(J)){V>f&&V<g&&(g=V);for(var h=[],i=J.methods.tokenByIndex,j=f;j<g;j++){var k=V-j-1;if(k<0)break;i(k).call({from:b}).then(function(a){h.push(a),h.length===g-f&&ad(h)})}}},[Y,_,V,au]),(0,h.useEffect)(function(){console.log(2,"finalTokens",ac);var a=[];ac.forEach(function(c){var d=J.methods.tokenURI;d(c).call({from:b}).then(function(e){var f=JSON.parse(atob(e.substr(29)));(d=J.methods.ownerOf)(c).call({from:b}).then(function(b){f.tokenId=c,f.owner=b,a.push(f),a.length===ac.length&&(a.sort(function(a,b){return b.tokenId-a.tokenId}),H(a))})})})},[ac]);var az=function(){(0,J.methods.totalSupply)().call({from:b}).then(function(a){W(parseInt(a.toString()))})},aA=function(){var a=[],d=[];console.log(af),Object.entries(al).forEach(function(b){a.push(b[0]),d.push(b[1])});var e=J.methods.merge,f=e(a,d,parseInt(af)).encodeABI(),g={from:b,to:J._address,data:f,value:0,gasLimit:0};e(a,d,parseInt(af)).estimateGas({from:b}).then(function(a){g.gasLimit=a,c.eth.sendTransaction(g).on("transactionHash",function(){aj(!0)}).on("receipt",function(){D(),aj(!1),aB(0)}).on("error",function(){aj(!1),ay({title:"Failed",description:"Merge xNFT's share failed",status:"error",position:"bottom-right",isClosable:!0})})})},aB=function(a){if(0===a|| void 0===a)az();else{var c=J.methods.tokenURI;c(a).call({from:b}).then(function(d){var e=JSON.parse(atob(d.substr(29)));(c=J.methods.ownerOf)(a).call({from:b}).then(function(b){e.tokenId=a,e.owner=b;var c=G.map(function(b){return b.tokenId===a?e:b});H(c)})})}},aC=function(a,b,c){switch(console.log(a,b,c),a){case y.dx.FromAdd:al[b]=c,delete ao[b];break;case y.dx.FromRemove:delete al[b];break;case y.dx.FromModify:break;case y.dx.ToAdd:ao[b]=1,delete al[b];break;case y.dx.ToRemove:delete ao[b];break;case y.dx.Clear:delete al[b],delete ao[b]}console.log(al,ao),am(JSON.parse(JSON.stringify(al))),ap(JSON.parse(JSON.stringify(ao)))},aD=function(){var a="";return Object.entries(al).forEach(function(b){a+="{xNFT #".concat(b[0],": ").concat(b[1],"}")}),a},aE=function(){var a;if(0===Object.entries(al).length||0===Object.entries(ao).length){ay({title:"Warning",description:"You should select the out and to xNFT for transferring share.",status:"warning",position:"bottom-right",isClosable:!0});return}as(aD()),ag(null===(a=Object.entries(ao)[0])|| void 0===a?void 0:a[0]),C()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.X6,{size:"lg",marginBottom:6,children:(0,e.jsxs)(k.Ug,{justifyContent:"space-between",children:[(0,e.jsxs)(k.Ug,{spacing:"18px",children:[(0,e.jsx)("div",{children:"xNFT List"}),(0,e.jsx)(l.XZ,{colorScheme:"teal",onChange:function(a){return T(a.target.checked)},children:"Only Mine"}),(0,e.jsx)(m.u,{label:"Filter xRobot Address: ".concat(M),children:(0,e.jsx)(n.zx,{colorScheme:"teal",variant:"ghost",onClick:E.onOpen,children:(0,e.jsx)(o.JO,{as:v.FNs,w:6,h:6})})})]}),(0,e.jsxs)(k.Ug,{spacing:"18px",children:[(0,e.jsx)(m.u,{label:"Last Page",children:(0,e.jsx)(n.zx,{colorScheme:"teal",variant:"outline",onClick:function(){return av(au>0?au-1:0)},children:(0,e.jsx)(u.Y4,{})})}),(0,e.jsxs)(p.Y2,{value:au,size:"sm",maxW:"100px",mr:"2rem",children:[(0,e.jsx)(p.zu,{}),(0,e.jsxs)(p.Fi,{children:[(0,e.jsx)(p.WQ,{}),(0,e.jsx)(p.Y_,{})]})]}),(0,e.jsx)(m.u,{label:"Next Page",children:(0,e.jsx)(n.zx,{colorScheme:"teal",variant:"outline",onClick:function(){return av((au+1)*ax>=V?au:au+1)},children:(0,e.jsx)(u.LZ,{})})})]}),(0,e.jsxs)(k.Ug,{spacing:"18px",children:[(0,e.jsx)(n.zx,{colorScheme:"teal",variant:"outline",onClick:function(){return aB(0)},children:"Refresh"}),(0,e.jsx)(n.zx,{colorScheme:"teal",variant:"outline",onClick:aE,children:"Merge"})]})]})}),(null==G?void 0:G.length)?(0,e.jsx)(k.MI,{columns:3,spacing:10,children:G.map(function(a,e){return(0,h.createElement)(w.aU,(0,g.Z)((0,d.Z)({},a),{key:e,account:b,web3:c,xNFT:J,setMergeInfo:aC,refresh:aB}))})}):(0,e.jsx)(k.xu,{children:"Looks Like there are no xNFTs"}),(0,e.jsxs)(q.u_,{isOpen:B,onClose:D,children:[(0,e.jsx)(q.ZA,{}),(0,e.jsxs)(q.hz,{children:[(0,e.jsx)(q.xB,{children:"Merge xNFT Value"}),(0,e.jsx)(q.ol,{}),(0,e.jsxs)(q.fe,{pb:6,children:[(0,e.jsxs)(r.NI,{children:[(0,e.jsx)(r.lX,{children:"Out Shares Information"}),(0,e.jsx)(s.II,{disabled:!0,value:ar})]}),(0,e.jsxs)(r.NI,{children:[(0,e.jsx)(r.lX,{children:"To xNFT's TokenID"}),(0,e.jsx)(t.Ph,{onChange:function(a){return ag(a.target.value)},value:af,children:Object.entries(ao).map(function(a){return(0,e.jsxs)("option",{value:a[0],children:["tokenId = ",a[0]]})})})]})]}),(0,e.jsxs)(q.mz,{children:[(0,e.jsx)(n.zx,{colorScheme:"blue",mr:3,onClick:function(){return aA()},isLoading:ai,loadingText:"Merging",children:"Merge"}),(0,e.jsx)(n.zx,{onClick:D,children:"Cancel"})]})]})]}),(0,e.jsxs)(q.u_,{isOpen:E.isOpen,onClose:E.onClose,children:[(0,e.jsx)(q.ZA,{}),(0,e.jsxs)(q.hz,{children:[(0,e.jsx)(q.xB,{children:"Filter xRobot"}),(0,e.jsx)(q.ol,{}),(0,e.jsx)(q.fe,{pb:6,children:(0,e.jsxs)(r.NI,{children:[(0,e.jsx)(r.lX,{children:"Address of xRobot"}),(0,e.jsx)(s.II,{value:P,onChange:function(a){return Q(a.target.value)}})]})}),(0,e.jsxs)(q.mz,{children:[(0,e.jsx)(n.zx,{colorScheme:"red",mr:3,onClick:function(){N(""),Q(""),E.onClose()},children:"Clear"}),(0,e.jsx)(n.zx,{colorScheme:"blue",mr:3,onClick:function(){N(P),E.onClose()},children:"Confirm"}),(0,e.jsx)(n.zx,{onClick:E.onClose,children:"Cancel"})]})]})]})]})},B=!0,C=function(a){return(0,e.jsx)(f.g,{pageName:"NFT Balances",children:(0,e.jsx)(A,(0,d.Z)({},a))})}},1392:function(a){"use strict";a.exports=JSON.parse('[{"inputs":[{"internalType":"contract IXEN","name":"_xen","type":"address"},{"internalType":"contract ITraits","name":"_traits","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"_tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"_operator","type":"address"},{"indexed":false,"internalType":"uint256","name":"_value","type":"uint256"}],"name":"ApprovalValue","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId_","type":"uint256"},{"internalType":"address","name":"to_","type":"address"},{"internalType":"uint256","name":"value_","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"times","type":"uint256"},{"internalType":"uint256","name":"term","type":"uint256"}],"name":"batchMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"fromTokenIds","type":"uint256[]"},{"internalType":"uint256[]","name":"fromTokenValues","type":"uint256[]"},{"internalType":"uint256","name":"toTokenId","type":"uint256"}],"name":"merge","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"_tokenId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"_oldSlot","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"_newSlot","type":"uint256"}],"name":"SlotChanged","type":"event"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256[]","name":"newTokenValues","type":"uint256[]"}],"name":"split","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"uint256","name":"fromTokenId_","type":"uint256"},{"internalType":"address","name":"to_","type":"address"},{"internalType":"uint256","name":"value_","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"fromTokenId_","type":"uint256"},{"internalType":"uint256","name":"toTokenId_","type":"uint256"},{"internalType":"uint256","name":"value_","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"_fromTokenId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"_toTokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_value","type":"uint256"}],"name":"TransferValue","type":"event"},{"inputs":[{"internalType":"uint256[]","name":"tokenIds","type":"uint256[]"}],"name":"withdrawReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId_","type":"uint256"},{"internalType":"address","name":"operator_","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"slot_","type":"uint256"}],"name":"allTokensInSlot","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId_","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"contractURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getRobots","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"slotId","type":"uint256"}],"name":"hasTimeLeft","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"id","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId_","type":"uint256"}],"name":"slotOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"slot_","type":"uint256"}],"name":"slotURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"slot_","type":"uint256"},{"internalType":"uint256","name":"index_","type":"uint256"}],"name":"tokenInSlotByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"slot_","type":"uint256"}],"name":"tokenSupplyInSlot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenWithdrawed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TotalShares","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"traits","outputs":[{"internalType":"contract ITraits","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"userXRobots","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"valueDecimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"xen","outputs":[{"internalType":"contract IXEN","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}},function(a){a.O(0,[956,525,168,859,516,601,774,888,179],function(){var b;return a(a.s=7278)}),_N_E=a.O()}])